{
  "version": 3,
  "sources": ["autocomplete.js"],
  "sourcesContent": ["/**\r\n * Bootstrap 5 autocomplete\r\n * https://github.com/lekoala/bootstrap5-autocomplete\r\n * @license MIT\r\n */\r\n\r\n// #region config\r\n\r\n/**\r\n * @callback RenderCallback\r\n * @param {Object} item\r\n * @param {String} label\r\n * @param {Autocomplete} inst\r\n * @returns {string}\r\n */\r\n\r\n/**\r\n * @callback ItemCallback\r\n * @param {Object} item\r\n * @param {Autocomplete} inst\r\n * @returns {void}\r\n */\r\n\r\n/**\r\n * @callback ValueCallback\r\n * @param {String} value\r\n * @param {Autocomplete} inst\r\n * @returns {void}\r\n */\r\n\r\n/**\r\n * @callback ServerCallback\r\n * @param {Response} response\r\n * @param {Autocomplete} inst\r\n * @returns {Promise}\r\n */\r\n\r\n/**\r\n * @callback ErrorCallback\r\n * @param {Error} e\r\n * @param {AbortSignal} signal\r\n * @param {Autocomplete} inst\r\n * @returns {void}\r\n */\r\n\r\n/**\r\n * @callback FetchCallback\r\n * @param {Autocomplete} inst\r\n * @returns {void}\r\n */\r\n\r\n/**\r\n * @typedef Config\r\n * @property {Boolean} showAllSuggestions Show all suggestions even if they don't match\r\n * @property {Number} suggestionsThreshold Number of chars required to show suggestions\r\n * @property {Number} maximumItems Maximum number of items to display\r\n * @property {Boolean} autoselectFirst Always select the first item\r\n * @property {Boolean} ignoreEnter Ignore enter if no items are selected (play nicely with autoselectFirst=0)\r\n * @property {Boolean} tabSelect Tab will trigger selection if active\r\n * @property {Boolean} updateOnSelect Update input value on selection (doesn't play nice with autoselectFirst)\r\n * @property {Boolean} highlightTyped Highlight matched part of the label\r\n * @property {String} highlightClass Class added to the mark label\r\n * @property {Boolean} fullWidth Match the width on the input field\r\n * @property {Boolean} fixed Use fixed positioning (solve overflow issues)\r\n * @property {Boolean} fuzzy Fuzzy search\r\n * @property {Boolean} startsWith Must start with the string. Defaults to false (it matches any position).\r\n * @property {Boolean} fillIn Show fill in icon.\r\n * @property {Boolean} preventBrowserAutocomplete Additional measures to prevent browser autocomplete\r\n * @property {String} itemClass Applied to the dropdown item. Accepts space separated classes.\r\n * @property {Array} activeClasses By default: [\"bg-primary\", \"text-white\"]\r\n * @property {String} labelField Key for the label\r\n * @property {String} valueField Key for the value\r\n * @property {Array} searchFields Key for the search\r\n * @property {String} queryParam Key for the query parameter for server\r\n * @property {Array|Object} items An array of label/value objects or an object with key/values\r\n * @property {Function} source A function that provides the list of items\r\n * @property {Boolean} hiddenInput Create an hidden input which stores the valueField\r\n * @property {String} hiddenValue Populate the initial hidden value. Mostly useful with liveServer.\r\n * @property {String} clearControl Selector that will clear the input on click.\r\n * @property {String} datalist The id of the source datalist\r\n * @property {String} server Endpoint for data provider\r\n * @property {String} serverMethod HTTP request method for data provider, default is GET\r\n * @property {String|Object} serverParams Parameters to pass along to the server.  You can specify a \"related\" key with (a) the id of a related field or (b) an array of related field ids.\r\n * @property {String} serverDataKey By default: data\r\n * @property {RequestInit} fetchOptions Any other fetch options (https://developer.mozilla.org/en-US/docs/Web/API/fetch#syntax)\r\n * @property {Boolean} liveServer Should the endpoint be called each time on input\r\n * @property {Boolean} noCache Prevent caching by appending a timestamp\r\n * @property {Number} debounceTime Debounce time for live server\r\n * @property {String} notFoundMessage Display a no suggestions found message. Leave empty to disable\r\n * @property {RenderCallback} onRenderItem Callback function that returns the label\r\n * @property {ItemCallback} onSelectItem Callback function to call on selection\r\n * @property {ValueCallback} onClearItem Callback function to call on clear\r\n * @property {ServerCallback} onServerResponse Callback function to process server response. Must return a Promise\r\n * @property {ErrorCallback} onServerError Callback function to process server errors.\r\n * @property {ItemCallback} onChange Callback function to call on change-event. Returns currently selected item if any\r\n * @property {FetchCallback} onBeforeFetch Callback function before fetch\r\n * @property {FetchCallback} onAfterFetch Callback function after fetch\r\n */\r\n\r\n/**\r\n * @type {Config}\r\n */\r\nconst DEFAULTS = {\r\n  showAllSuggestions: false,\r\n  suggestionsThreshold: 1,\r\n  maximumItems: 0,\r\n  autoselectFirst: true,\r\n  ignoreEnter: false,\r\n  tabSelect: false,\r\n  updateOnSelect: false,\r\n  highlightTyped: false,\r\n  highlightClass: \"\",\r\n  fullWidth: false,\r\n  fixed: false,\r\n  fuzzy: false,\r\n  startsWith: false,\r\n  fillIn: false,\r\n  preventBrowserAutocomplete: false,\r\n  itemClass: \"\",\r\n  activeClasses: [\"bg-primary\", \"text-white\"],\r\n  labelField: \"label\",\r\n  valueField: \"value\",\r\n  searchFields: [\"label\"],\r\n  queryParam: \"query\",\r\n  items: [],\r\n  source: null,\r\n  hiddenInput: false,\r\n  hiddenValue: \"\",\r\n  clearControl: \"\",\r\n  datalist: \"\",\r\n  server: \"\",\r\n  serverMethod: \"GET\",\r\n  serverParams: {},\r\n  serverDataKey: \"data\",\r\n  fetchOptions: {},\r\n  liveServer: false,\r\n  noCache: true,\r\n  debounceTime: 300,\r\n  notFoundMessage: \"\",\r\n  onRenderItem: (item, label, inst) => {\r\n    return label;\r\n  },\r\n  onSelectItem: (item, inst) => {},\r\n  onClearItem: (item, inst) => {},\r\n  onServerResponse: (response, inst) => {\r\n    return response.json();\r\n  },\r\n  onServerError: (e, signal, inst) => {\r\n    // Current version of Firefox rejects the promise with a DOMException\r\n    if (e.name === \"AbortError\" || signal.aborted) {\r\n      return;\r\n    }\r\n    console.error(e);\r\n  },\r\n  onChange: (item, inst) => {},\r\n  onBeforeFetch: (inst) => {},\r\n  onAfterFetch: (inst) => {},\r\n};\r\n\r\n// #endregion\r\n\r\n// #region constants\r\n\r\nconst LOADING_CLASS = \"is-loading\";\r\nconst ACTIVE_CLASS = \"is-active\";\r\nconst SHOW_CLASS = \"show\";\r\nconst NEXT = \"next\";\r\nconst PREV = \"prev\";\r\n\r\n/**\r\n * @type WeakMap<HTMLElement, Autocomplete>\r\n */\r\nconst INSTANCE_MAP = new WeakMap();\r\nlet counter = 0;\r\nlet activeCounter = 0;\r\n\r\n// #endregion\r\n\r\n// #region functions\r\n\r\n/**\r\n * @param {Function} func\r\n * @param {number} timeout\r\n * @returns {Function}\r\n */\r\nfunction debounce(func, timeout = 300) {\r\n  let timer;\r\n  return (...args) => {\r\n    clearTimeout(timer);\r\n    timer = setTimeout(() => {\r\n      //@ts-ignore\r\n      func.apply(this, args);\r\n    }, timeout);\r\n  };\r\n}\r\n\r\n/**\r\n * @param {String} str\r\n * @returns {String}\r\n */\r\nfunction removeDiacritics(str) {\r\n  return str.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\");\r\n}\r\n\r\n/**\r\n * @param {String|Number} str\r\n * @returns {String}\r\n */\r\nfunction normalize(str) {\r\n  if (!str) {\r\n    return \"\";\r\n  }\r\n  return removeDiacritics(str.toString()).toLowerCase();\r\n}\r\n\r\n/**\r\n * A simple fuzzy match algorithm that checks if chars are matched\r\n * in order in the target string\r\n *\r\n * @param {String} str\r\n * @param {String} lookup\r\n * @returns {Boolean}\r\n */\r\nfunction fuzzyMatch(str, lookup) {\r\n  if (str.indexOf(lookup) >= 0) {\r\n    return true;\r\n  }\r\n  let pos = 0;\r\n  for (let i = 0; i < lookup.length; i++) {\r\n    const c = lookup[i];\r\n    if (c == \" \") continue;\r\n    pos = str.indexOf(c, pos) + 1;\r\n    if (pos <= 0) {\r\n      return false;\r\n    }\r\n  }\r\n  return true;\r\n}\r\n\r\n/**\r\n * @param {HTMLElement} el\r\n * @param {HTMLElement} newEl\r\n * @returns {HTMLElement}\r\n */\r\nfunction insertAfter(el, newEl) {\r\n  return el.parentNode.insertBefore(newEl, el.nextSibling);\r\n}\r\n\r\n/**\r\n * @param {string} html\r\n * @returns {string}\r\n */\r\nfunction decodeHtml(html) {\r\n  var txt = document.createElement(\"textarea\");\r\n  txt.innerHTML = html;\r\n  return txt.value;\r\n}\r\n\r\n/**\r\n * @param {HTMLElement} el\r\n * @param {Object} attrs\r\n */\r\nfunction attrs(el, attrs) {\r\n  for (const [k, v] of Object.entries(attrs)) {\r\n    el.setAttribute(k, v);\r\n  }\r\n}\r\n\r\n/**\r\n * Add a zero width join between chars\r\n * @param {HTMLElement|Element} el\r\n */\r\nfunction zwijit(el) {\r\n  //@ts-ignore\r\n  el.ariaLabel = el.innerText;\r\n  //@ts-ignore\r\n  el.innerHTML = el.innerText\r\n    .split(\"\")\r\n    .map((char) => char + \"&zwj;\")\r\n    .join(\"\");\r\n}\r\n\r\nfunction nested(str, obj = \"window\") {\r\n  return str.split(\".\").reduce((r, p) => r[p], obj);\r\n}\r\n\r\n// #endregion\r\n\r\nclass Autocomplete {\r\n  /**\r\n   * @param {HTMLInputElement} el\r\n   * @param {Partial<Config>} config\r\n   */\r\n  constructor(el, config = {}) {\r\n    if (!(el instanceof HTMLElement)) {\r\n      console.error(\"Invalid element\", el);\r\n      return;\r\n    }\r\n    INSTANCE_MAP.set(el, this);\r\n    counter++;\r\n    activeCounter++;\r\n    this._searchInput = el;\r\n\r\n    this._configure(config);\r\n\r\n    // Private vars\r\n    this._isMouse = false;\r\n    this._preventInput = false;\r\n    this._keyboardNavigation = false;\r\n    this._searchFunc = debounce(() => {\r\n      this._loadFromServer(true);\r\n    }, this._config.debounceTime);\r\n\r\n    // Create html\r\n    this._configureSearchInput();\r\n    this._configureDropElement();\r\n\r\n    if (this._config.fixed) {\r\n      document.addEventListener(\"scroll\", this, true);\r\n      window.addEventListener(\"resize\", this);\r\n    }\r\n\r\n    const clearControl = this._getClearControl();\r\n    if (clearControl) {\r\n      clearControl.addEventListener(\"click\", this);\r\n    }\r\n\r\n    // Add listeners (remove then on dispose()). See handleEvent.\r\n    [\"focus\", \"change\", \"blur\", \"input\", \"keydown\"].forEach((type) => {\r\n      this._searchInput.addEventListener(type, this);\r\n    });\r\n    [\"mousemove\", \"mouseenter\", \"mouseleave\"].forEach((type) => {\r\n      this._dropElement.addEventListener(type, this);\r\n    });\r\n\r\n    this._fetchData();\r\n  }\r\n\r\n  // #region Core\r\n\r\n  /**\r\n   * Attach to all elements matched by the selector\r\n   * @param {string} selector\r\n   * @param {Partial<Config>} config\r\n   */\r\n  static init(selector = \"input.autocomplete\", config = {}) {\r\n    /**\r\n     * @type {NodeListOf<HTMLInputElement>}\r\n     */\r\n    const nodes = document.querySelectorAll(selector);\r\n    nodes.forEach((el) => {\r\n      this.getOrCreateInstance(el, config);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * @param {HTMLInputElement} el\r\n   * @returns {Autocomplete | null}\r\n   */\r\n  static getInstance(el) {\r\n    return INSTANCE_MAP.has(el) ? INSTANCE_MAP.get(el) : null;\r\n  }\r\n\r\n  /**\r\n   * @param {HTMLInputElement} el\r\n   * @param {Partial<Config>} config\r\n   * @returns {Autocomplete}\r\n   */\r\n  static getOrCreateInstance(el, config = {}) {\r\n    return this.getInstance(el) || new this(el, config);\r\n  }\r\n\r\n  dispose() {\r\n    activeCounter--;\r\n\r\n    [\"focus\", \"change\", \"blur\", \"input\", \"keydown\"].forEach((type) => {\r\n      this._searchInput.removeEventListener(type, this);\r\n    });\r\n    [\"mousemove\", \"mouseenter\", \"mouseleave\"].forEach((type) => {\r\n      this._dropElement.removeEventListener(type, this);\r\n    });\r\n\r\n    const clearControl = this._getClearControl();\r\n    if (clearControl) {\r\n      clearControl.removeEventListener(\"click\", this);\r\n    }\r\n\r\n    // only remove if there are no more active elements\r\n    if (this._config.fixed && activeCounter <= 0) {\r\n      document.removeEventListener(\"scroll\", this, true);\r\n      window.removeEventListener(\"resize\", this);\r\n    }\r\n\r\n    this._dropElement.parentElement.removeChild(this._dropElement);\r\n\r\n    INSTANCE_MAP.delete(this._searchInput);\r\n  }\r\n\r\n  _getClearControl() {\r\n    if (this._config.clearControl) {\r\n      return document.querySelector(this._config.clearControl);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @link https://github.com/lifaon74/events-polyfill/issues/10\r\n   * @link https://gist.github.com/WebReflection/ec9f6687842aa385477c4afca625bbf4#handling-events\r\n   * @param {Event} event\r\n   */\r\n  handleEvent = (event) => {\r\n    // debounce scroll and resize\r\n    const debounced = [\"scroll\", \"resize\"];\r\n    if (debounced.includes(event.type)) {\r\n      if (this._timer) window.cancelAnimationFrame(this._timer);\r\n      this._timer = window.requestAnimationFrame(() => {\r\n        this[`on${event.type}`](event);\r\n      });\r\n    } else {\r\n      this[`on${event.type}`](event);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * @param {Partial<Config>} config\r\n   */\r\n  _configure(config = {}) {\r\n    this._config = Object.assign({}, DEFAULTS);\r\n\r\n    // Handle options, using arguments first and data attr as override\r\n    const o = { ...config, ...this._searchInput.dataset };\r\n\r\n    // Allow 1/0, true/false as strings\r\n    const parseBool = (value) => [\"true\", \"false\", \"1\", \"0\", true, false].includes(value) && !!JSON.parse(value);\r\n\r\n    // Typecast provided options based on defaults types\r\n    for (const [key, defaultValue] of Object.entries(DEFAULTS)) {\r\n      // Check for undefined keys\r\n      if (o[key] === void 0) {\r\n        continue;\r\n      }\r\n      const value = o[key];\r\n      switch (typeof defaultValue) {\r\n        case \"number\":\r\n          this._config[key] = parseInt(value);\r\n          break;\r\n        case \"boolean\":\r\n          this._config[key] = parseBool(value);\r\n          break;\r\n        case \"string\":\r\n          this._config[key] = value.toString();\r\n          break;\r\n        case \"object\":\r\n          // Arrays have a type object in js\r\n          if (Array.isArray(defaultValue)) {\r\n            if (typeof value === \"string\") {\r\n              const separator = value.includes(\"|\") ? \"|\" : \",\";\r\n              this._config[key] = value.split(separator);\r\n            } else {\r\n              this._config[key] = value;\r\n            }\r\n          } else {\r\n            this._config[key] = typeof value === \"string\" ? JSON.parse(value) : value;\r\n          }\r\n          break;\r\n        case \"function\":\r\n          this._config[key] = typeof value === \"string\" ? window[value] : value;\r\n          break;\r\n        default:\r\n          this._config[key] = value;\r\n          break;\r\n      }\r\n    }\r\n  }\r\n\r\n  // #endregion\r\n\r\n  // #region Html\r\n\r\n  _configureSearchInput() {\r\n    this._searchInput.autocomplete = \"off\";\r\n    this._searchInput.spellcheck = false;\r\n    // note: firefox doesn't support the properties so we use attributes\r\n    // @link https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Attributes/aria-autocomplete\r\n    // @link https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Attributes/aria-expanded\r\n    // use the aria-expanded state on the element with role combobox to communicate that the list is displayed.\r\n    attrs(this._searchInput, {\r\n      \"aria-autocomplete\": \"list\",\r\n      \"aria-haspopup\": \"menu\",\r\n      \"aria-expanded\": \"false\",\r\n      role: \"combobox\",\r\n    });\r\n\r\n    // Even with autocomplete \"off\" we can get suggestion from browser due to label\r\n    if (this._searchInput.id && this._config.preventBrowserAutocomplete) {\r\n      const label = document.querySelector(`[for=\"${this._searchInput.id}\"]`);\r\n      if (label) {\r\n        zwijit(label);\r\n      }\r\n    }\r\n\r\n    // Hidden input?\r\n    this._hiddenInput = null;\r\n    if (this._config.hiddenInput) {\r\n      this._hiddenInput = document.createElement(\"input\");\r\n      this._hiddenInput.type = \"hidden\";\r\n      this._hiddenInput.value = this._config.hiddenValue;\r\n      this._hiddenInput.name = this._searchInput.name;\r\n      this._searchInput.name = \"_\" + this._searchInput.name;\r\n      insertAfter(this._searchInput, this._hiddenInput);\r\n    }\r\n  }\r\n\r\n  _configureDropElement() {\r\n    this._dropElement = document.createElement(\"ul\");\r\n    this._dropElement.id = \"ac-menu-\" + counter;\r\n    this._dropElement.classList.add(...[\"dropdown-menu\", \"autocomplete-menu\", \"p-0\"]);\r\n    this._dropElement.style.maxHeight = \"280px\";\r\n    if (!this._config.fullWidth) {\r\n      this._dropElement.style.maxWidth = \"360px\";\r\n    }\r\n    if (this._config.fixed) {\r\n      this._dropElement.style.position = \"fixed\";\r\n    }\r\n    this._dropElement.style.overflowY = \"auto\";\r\n    // Prevent scrolling the menu from scrolling the page\r\n    // @link https://developer.mozilla.org/en-US/docs/Web/CSS/overscroll-behavior\r\n    this._dropElement.style.overscrollBehavior = \"contain\";\r\n    this._dropElement.style.textAlign = \"unset\"; // otherwise RTL is not good\r\n\r\n    insertAfter(this._searchInput, this._dropElement);\r\n    // include aria-controls with the value of the id of the suggested list of values.\r\n    this._searchInput.setAttribute(\"aria-controls\", this._dropElement.id);\r\n  }\r\n\r\n  // #endregion\r\n\r\n  // #region Events\r\n\r\n  onclick(e) {\r\n    if (e.target.matches(this._config.clearControl)) {\r\n      this.clear();\r\n    }\r\n  }\r\n\r\n  oninput(e) {\r\n    if (this._preventInput) {\r\n      return;\r\n    }\r\n    // Input has changed, clear value\r\n    if (this._hiddenInput) {\r\n      this._hiddenInput.value = null;\r\n    }\r\n    this.showOrSearch();\r\n  }\r\n\r\n  onchange(e) {\r\n    const search = this._searchInput.value;\r\n    const item = this._items.find((item) => item.label === search);\r\n    this._config.onChange(item, this);\r\n  }\r\n\r\n  onblur(e) {\r\n    const related = e.relatedTarget;\r\n    // Clicking on the scroll in a modal blur the element incorrectly\r\n    // In chrome >= 127, the related target is the dropdown menu\r\n    if (this._isMouse && related && (related.classList.contains(\"modal\") || related.classList.contains(\"autocomplete-menu\"))) {\r\n      // Restore focus\r\n      this._searchInput.focus();\r\n      return;\r\n    }\r\n    setTimeout(() => {\r\n      this.hideSuggestions();\r\n    }, 100);\r\n  }\r\n\r\n  onfocus(e) {\r\n    this.showOrSearch();\r\n  }\r\n\r\n  /**\r\n   * keypress doesn't send arrow keys, so we use keydown\r\n   * @param {KeyboardEvent} e\r\n   */\r\n  onkeydown(e) {\r\n    const key = e.keyCode || e.key;\r\n    switch (key) {\r\n      case 13:\r\n      case \"Enter\":\r\n        if (this.isDropdownVisible()) {\r\n          const selection = this.getSelection();\r\n          if (selection) {\r\n            selection.click();\r\n          }\r\n          if (selection || !this._config.ignoreEnter) {\r\n            e.preventDefault();\r\n          }\r\n        }\r\n        break;\r\n      case 9:\r\n      case \"Tab\":\r\n        if (this.isDropdownVisible() && this._config.tabSelect) {\r\n          const selection = this.getSelection();\r\n          if (selection) {\r\n            selection.click();\r\n            e.preventDefault();\r\n          }\r\n        }\r\n        break;\r\n      case 38:\r\n      case \"ArrowUp\":\r\n        e.preventDefault();\r\n        this._keyboardNavigation = true;\r\n        this._moveSelection(PREV);\r\n        break;\r\n      case 40:\r\n      case \"ArrowDown\":\r\n        e.preventDefault();\r\n        this._keyboardNavigation = true;\r\n        if (this.isDropdownVisible()) {\r\n          this._moveSelection(NEXT);\r\n        } else {\r\n          // show menu regardless of input length\r\n          this.showOrSearch(false);\r\n        }\r\n        break;\r\n      case 27:\r\n      case \"Escape\":\r\n        if (this.isDropdownVisible()) {\r\n          this._searchInput.focus();\r\n          this.hideSuggestions();\r\n        }\r\n        break;\r\n    }\r\n  }\r\n\r\n  onmouseenter(e) {\r\n    this._isMouse = true;\r\n  }\r\n\r\n  onmousemove(e) {\r\n    this._isMouse = true;\r\n    // Moving the mouse means no longer using keyboard\r\n    this._keyboardNavigation = false;\r\n  }\r\n\r\n  onmouseleave(e) {\r\n    this._isMouse = false;\r\n    // Remove selection\r\n    this.removeSelection();\r\n  }\r\n\r\n  onscroll(e) {\r\n    this._positionMenu();\r\n  }\r\n\r\n  onresize(e) {\r\n    this._positionMenu();\r\n  }\r\n\r\n  // #endregion\r\n\r\n  // #region Api\r\n\r\n  /**\r\n   * @param {String} k\r\n   * @returns {Config}\r\n   */\r\n  getConfig(k = null) {\r\n    if (k !== null) {\r\n      return this._config[k];\r\n    }\r\n    return this._config;\r\n  }\r\n\r\n  /**\r\n   * @param {String} k\r\n   * @param {*} v\r\n   */\r\n  setConfig(k, v) {\r\n    this._config[k] = v;\r\n  }\r\n\r\n  setData(src) {\r\n    this._items = [];\r\n    this._addItems(src);\r\n  }\r\n\r\n  enable() {\r\n    this._searchInput.setAttribute(\"disabled\", \"\");\r\n  }\r\n\r\n  disable() {\r\n    this._searchInput.removeAttribute(\"disabled\");\r\n  }\r\n\r\n  /**\r\n   * @returns {boolean}\r\n   */\r\n  isDisabled() {\r\n    return this._searchInput.hasAttribute(\"disabled\") || this._searchInput.disabled || this._searchInput.hasAttribute(\"readonly\");\r\n  }\r\n\r\n  /**\r\n   * @returns {boolean}\r\n   */\r\n  isDropdownVisible() {\r\n    return this._dropElement.classList.contains(SHOW_CLASS);\r\n  }\r\n\r\n  clear() {\r\n\tconst v = this._searchInput.value;\r\n\r\n    this._searchInput.value = \"\";\r\n    if (this._hiddenInput) {\r\n      this._hiddenInput.value = \"\";\r\n    }\r\n\r\n    this._config.onClearItem(v, this);\r\n  }\r\n\r\n  // #endregion\r\n\r\n  // #region Selection management\r\n\r\n  /**\r\n   * @returns {HTMLElement}\r\n   */\r\n  getSelection() {\r\n    return this._dropElement.querySelector(\"a.\" + ACTIVE_CLASS);\r\n  }\r\n\r\n  removeSelection() {\r\n    const selection = this.getSelection();\r\n    if (selection) {\r\n      selection.classList.remove(...this._activeClasses());\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @returns {Array}\r\n   */\r\n  _activeClasses() {\r\n    return [...this._config.activeClasses, ...[ACTIVE_CLASS]];\r\n  }\r\n\r\n  /**\r\n   * @param {HTMLElement} li\r\n   * @returns {Boolean}\r\n   */\r\n  _isItemEnabled(li) {\r\n    if (li.style.display === \"none\") {\r\n      return false;\r\n    }\r\n    const fc = li.firstElementChild;\r\n    return fc.tagName === \"A\" && !fc.classList.contains(\"disabled\");\r\n  }\r\n\r\n  /**\r\n   * @param {String} dir\r\n   * @param {*|HTMLElement} sel\r\n   * @returns {HTMLElement}\r\n   */\r\n  _moveSelection(dir = NEXT, sel = null) {\r\n    const active = this.getSelection();\r\n\r\n    // select first li\r\n    if (!active) {\r\n      // no active selection, cannot go back\r\n      if (dir === PREV) {\r\n        return sel;\r\n      }\r\n      // find first enabled item\r\n      if (!sel) {\r\n        sel = this._dropElement.firstChild;\r\n        while (sel && !this._isItemEnabled(sel)) {\r\n          sel = sel[\"nextSibling\"];\r\n        }\r\n      }\r\n    } else {\r\n      const sibling = dir === NEXT ? \"nextSibling\" : \"previousSibling\";\r\n\r\n      // Iterate over enabled li\r\n      sel = active.parentNode;\r\n      do {\r\n        sel = sel[sibling];\r\n      } while (sel && !this._isItemEnabled(sel));\r\n\r\n      // We have a new selection\r\n      if (sel) {\r\n        // Change classes\r\n        active.classList.remove(...this._activeClasses());\r\n\r\n        // Scroll if necessary\r\n        if (dir === PREV) {\r\n          // Don't use scrollIntoView as it scrolls the whole window\r\n          sel.parentNode.scrollTop = sel.offsetTop - sel.parentNode.offsetTop;\r\n        } else {\r\n          // This is the equivalent of scrollIntoView(false) but only for parent node\r\n          if (sel.offsetTop > sel.parentNode.offsetHeight - sel.offsetHeight) {\r\n            sel.parentNode.scrollTop += sel.offsetHeight;\r\n          }\r\n        }\r\n      } else if (active) {\r\n        sel = active.parentElement;\r\n      }\r\n    }\r\n\r\n    if (sel) {\r\n      const a = sel.querySelector(\"a\");\r\n      a.classList.add(...this._activeClasses());\r\n      this._searchInput.setAttribute(\"aria-activedescendant\", a.id);\r\n      if (this._config.updateOnSelect) {\r\n        this._searchInput.value = a.dataset.label;\r\n      }\r\n    } else {\r\n      this._searchInput.setAttribute(\"aria-activedescendant\", \"\");\r\n    }\r\n    return sel;\r\n  }\r\n\r\n  // #endregion\r\n\r\n  // #region Implementation\r\n\r\n  /**\r\n   * Do we have enough input to show suggestions ?\r\n   * @returns {Boolean}\r\n   */\r\n  _shouldShow() {\r\n    if (this.isDisabled()) {\r\n      return false;\r\n    }\r\n    return this._searchInput.value.length >= this._config.suggestionsThreshold;\r\n  }\r\n\r\n  /**\r\n   * Show suggestions or load them\r\n   * @param {Boolean} check\r\n   */\r\n  showOrSearch(check = true) {\r\n    if (check && !this._shouldShow()) {\r\n      this.hideSuggestions();\r\n      return;\r\n    }\r\n    if (this._config.liveServer) {\r\n      this._searchFunc();\r\n    } else if (this._config.source) {\r\n      this._config.source(this._searchInput.value, (items) => {\r\n        this.setData(items);\r\n        this._showSuggestions();\r\n      });\r\n    } else {\r\n      this._showSuggestions();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {String} name\r\n   * @returns {HTMLElement}\r\n   */\r\n  _createGroup(name) {\r\n    const newChild = this._createLi();\r\n    const newChildSpan = document.createElement(\"span\");\r\n    newChild.append(newChildSpan);\r\n    newChildSpan.classList.add(...[\"dropdown-header\", \"text-truncate\"]);\r\n    newChildSpan.innerHTML = name;\r\n    return newChild;\r\n  }\r\n\r\n  /**\r\n   * @param {String} lookup\r\n   * @param {Object} item\r\n   * @returns {HTMLElement}\r\n   */\r\n  _createItem(lookup, item) {\r\n    let label = item.label;\r\n\r\n    if (this._config.highlightTyped) {\r\n      const idx = normalize(label).indexOf(lookup);\r\n      if (idx !== -1) {\r\n        label =\r\n          label.substring(0, idx) +\r\n          `<mark class=\"${this._config.highlightClass}\">${label.substring(idx, idx + lookup.length)}</mark>` +\r\n          label.substring(idx + lookup.length, label.length);\r\n      }\r\n    }\r\n\r\n    label = this._config.onRenderItem(item, label, this);\r\n\r\n    const newChild = this._createLi();\r\n    const newChildLink = document.createElement(\"a\");\r\n    newChild.append(newChildLink);\r\n    newChildLink.id = this._dropElement.id + \"-\" + this._dropElement.children.length;\r\n    newChildLink.classList.add(...[\"dropdown-item\", \"text-truncate\"]);\r\n    if (this._config.itemClass) {\r\n      newChildLink.classList.add(...this._config.itemClass.split(\" \"));\r\n    }\r\n    newChildLink.setAttribute(\"data-value\", item.value);\r\n    newChildLink.setAttribute(\"data-label\", item.label);\r\n    // Behave like a datalist (tab doesn't allow item selection)\r\n    // @link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/datalist\r\n    newChildLink.setAttribute(\"tabindex\", \"-1\");\r\n    newChildLink.setAttribute(\"role\", \"menuitem\");\r\n    newChildLink.setAttribute(\"href\", \"#\");\r\n    newChildLink.innerHTML = label;\r\n    if (item.data) {\r\n      for (const [key, value] of Object.entries(item.data)) {\r\n        newChildLink.dataset[key] = value;\r\n      }\r\n    }\r\n\r\n    if (this._config.fillIn) {\r\n      const fillIn = document.createElement(\"button\");\r\n      fillIn.type = \"button\"; // prevent submit\r\n      fillIn.classList.add(...[\"btn\", \"btn-link\", \"border-0\"]);\r\n      fillIn.innerHTML = `<svg width=\"16\" height=\"16\" fill=\"currentColor\" viewBox=\"0 0 16 16\">\r\n      <path fill-rule=\"evenodd\" d=\"M2 2.5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1H3.707l10.147 10.146a.5.5 0 0 1-.708.708L3 3.707V8.5a.5.5 0 0 1-1 0z\"/>\r\n      </svg>`;\r\n      newChild.append(fillIn);\r\n      newChild.classList.add(...[\"d-flex\", \"justify-content-between\"]);\r\n      fillIn.addEventListener(\"click\", (event) => {\r\n        this._searchInput.value = item.label;\r\n        this._searchInput.focus(); // focus back to keep editing\r\n      });\r\n    }\r\n\r\n    // Hover sets active item\r\n    newChildLink.addEventListener(\"mouseenter\", (event) => {\r\n      // Don't trigger enter if using arrows or not currently using the mouse\r\n      if (this._keyboardNavigation || !this._isMouse) {\r\n        return;\r\n      }\r\n      this.removeSelection();\r\n      const a = newChild.querySelector(\"a\");\r\n      a.classList.add(...this._activeClasses());\r\n      this._searchInput.setAttribute(\"aria-activedescendant\", a.id);\r\n    });\r\n    // Prevent searchInput losing focus and close the menu\r\n    newChildLink.addEventListener(\"mousedown\", (event) => {\r\n      event.preventDefault();\r\n    });\r\n    // Apply value\r\n    newChildLink.addEventListener(\"click\", (event) => {\r\n      event.preventDefault();\r\n\r\n      // Prevent input otherwise it might trigger autocomplete due to value change\r\n      this._preventInput = true;\r\n      this._searchInput.value = decodeHtml(item.label);\r\n      // Populate value in hidden input\r\n      if (this._hiddenInput) {\r\n        this._hiddenInput.value = item.value;\r\n      }\r\n      this._config.onSelectItem(item, this);\r\n      this.hideSuggestions();\r\n      this._preventInput = false;\r\n    });\r\n\r\n    return newChild;\r\n  }\r\n\r\n  /**\r\n   * Get the active element, drilling into shadowRoot if necessary.\r\n   * @link https://www.abeautifulsite.net/posts/finding-the-active-element-in-a-shadow-root/\r\n   * @param {Document | ShadowRoot} root\r\n   * @returns {Element}\r\n   */\r\n  _getActiveElement(root = document) {\r\n    const activeEl = root.activeElement;\r\n\r\n    if (!activeEl) {\r\n      return null;\r\n    }\r\n\r\n    if (activeEl.shadowRoot) {\r\n      return this._getActiveElement(activeEl.shadowRoot);\r\n    } else {\r\n      return activeEl;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Show drop menu with suggestions\r\n   */\r\n  _showSuggestions() {\r\n    // It's not focused anymore\r\n    if (this._getActiveElement() != this._searchInput) {\r\n      return;\r\n    }\r\n    const lookup = normalize(this._searchInput.value);\r\n    this._dropElement.innerHTML = \"\";\r\n\r\n    let count = 0;\r\n    let firstItem = null;\r\n\r\n    const groups = [];\r\n    for (const entry of this._items) {\r\n      // Check search length since we can trigger dropdown with arrow\r\n      const showAllSuggestions = this._config.showAllSuggestions || lookup.length === 0;\r\n      // Do we find a matching string or do we display immediately ?\r\n      let isMatched = lookup.length == 0 && this._config.suggestionsThreshold === 0;\r\n      if (!showAllSuggestions && lookup.length > 0) {\r\n        // match on any field\r\n        this._config.searchFields.forEach((sf) => {\r\n          const text = normalize(entry[sf]);\r\n          let found = false;\r\n          if (this._config.fuzzy) {\r\n            found = fuzzyMatch(text, lookup);\r\n          } else {\r\n            const idx = text.indexOf(lookup);\r\n            found = this._config.startsWith ? idx === 0 : idx >= 0;\r\n          }\r\n          if (found) {\r\n            isMatched = true;\r\n          }\r\n        });\r\n      }\r\n      const selectFirst = isMatched || lookup.length === 0;\r\n      if (showAllSuggestions || isMatched) {\r\n        count++;\r\n\r\n        // Group\r\n        if (entry.group && !groups.includes(entry.group)) {\r\n          const newItem = this._createGroup(entry.group);\r\n          this._dropElement.appendChild(newItem);\r\n          groups.push(entry.group);\r\n        }\r\n\r\n        const newItem = this._createItem(lookup, entry);\r\n        // Only select as first item if its matching or no lookup\r\n        if (!firstItem && selectFirst) {\r\n          firstItem = newItem;\r\n        }\r\n        this._dropElement.appendChild(newItem);\r\n        if (this._config.maximumItems > 0 && count >= this._config.maximumItems) {\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (firstItem && this._config.autoselectFirst) {\r\n      this.removeSelection();\r\n      this._moveSelection(NEXT, firstItem);\r\n    }\r\n\r\n    if (count === 0) {\r\n      if (this._config.notFoundMessage) {\r\n        const newChild = this._createLi();\r\n        newChild.innerHTML = `<span class=\"dropdown-item\">${this._config.notFoundMessage}</span>`;\r\n        this._dropElement.appendChild(newChild);\r\n        this._showDropdown();\r\n      } else {\r\n        // Remove dropdown if not found\r\n        this.hideSuggestions();\r\n      }\r\n    } else {\r\n      // Or show it if necessary\r\n      this._showDropdown();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @returns {HTMLLIElement}\r\n   */\r\n  _createLi() {\r\n    const newChild = document.createElement(\"li\");\r\n    newChild.setAttribute(\"role\", \"presentation\");\r\n    return newChild;\r\n  }\r\n\r\n  /**\r\n   * Show and position dropdown\r\n   */\r\n  _showDropdown() {\r\n    this._dropElement.classList.add(SHOW_CLASS);\r\n    // Register role when shown to avoid empty children issues\r\n    this._dropElement.setAttribute(\"role\", \"menu\");\r\n    attrs(this._searchInput, {\r\n      \"aria-expanded\": \"true\",\r\n    });\r\n    this._positionMenu();\r\n  }\r\n\r\n  /**\r\n   * Show or hide suggestions\r\n   * @param {Boolean} check\r\n   */\r\n  toggleSuggestions(check = true) {\r\n    if (this._dropElement.classList.contains(SHOW_CLASS)) {\r\n      this.hideSuggestions();\r\n    } else {\r\n      this.showOrSearch(check);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Hide the dropdown menu\r\n   */\r\n  hideSuggestions() {\r\n    this._dropElement.classList.remove(SHOW_CLASS);\r\n    attrs(this._searchInput, {\r\n      \"aria-expanded\": \"false\",\r\n    });\r\n    this.removeSelection();\r\n  }\r\n\r\n  /**\r\n   * @returns {HTMLInputElement}\r\n   */\r\n  getInput() {\r\n    return this._searchInput;\r\n  }\r\n\r\n  /**\r\n   * @returns {HTMLUListElement}\r\n   */\r\n  getDropMenu() {\r\n    return this._dropElement;\r\n  }\r\n\r\n  /**\r\n   * Position the dropdown menu\r\n   */\r\n  _positionMenu() {\r\n    const styles = window.getComputedStyle(this._searchInput);\r\n    const bounds = this._searchInput.getBoundingClientRect();\r\n    const isRTL = styles.direction === \"rtl\";\r\n    const fullWidth = this._config.fullWidth;\r\n    const fixed = this._config.fixed;\r\n\r\n    // Don't position left if not fixed since it may not work in all situations\r\n    // due to offsetParent margin or in tables\r\n    let left = null;\r\n    let top = null;\r\n\r\n    if (fixed) {\r\n      left = bounds.x;\r\n      top = bounds.y + bounds.height;\r\n\r\n      // Align end\r\n      if (isRTL && !fullWidth) {\r\n        left -= this._dropElement.offsetWidth - bounds.width;\r\n      }\r\n    }\r\n\r\n    // Reset any height overflow adjustement\r\n    this._dropElement.style.transform = \"unset\";\r\n\r\n    // Use full holder width\r\n    if (fullWidth) {\r\n      this._dropElement.style.width = this._searchInput.offsetWidth + \"px\";\r\n    }\r\n\r\n    // Position element\r\n    if (left !== null) {\r\n      this._dropElement.style.left = left + \"px\";\r\n    }\r\n    if (top !== null) {\r\n      this._dropElement.style.top = top + \"px\";\r\n    }\r\n\r\n    // Overflow height\r\n    const dropBounds = this._dropElement.getBoundingClientRect();\r\n    const h = window.innerHeight;\r\n\r\n    // We display above input if it overflows\r\n    if (dropBounds.y + dropBounds.height > h) {\r\n      // We need to add the offset twice\r\n      const topOffset = fullWidth ? bounds.height + 4 : bounds.height;\r\n      // In chrome, we need 100.1% to avoid blurry text\r\n      // @link https://stackoverflow.com/questions/32034574/font-looks-blurry-after-translate-in-chrome\r\n      this._dropElement.style.transform = \"translateY(calc(-100.1% - \" + topOffset + \"px))\";\r\n    }\r\n  }\r\n\r\n  _fetchData() {\r\n    this._items = [];\r\n\r\n    // From an array of items or an object\r\n    this._addItems(this._config.items);\r\n\r\n    // From a datalist\r\n    const dl = this._config.datalist;\r\n    if (dl) {\r\n      const datalist = document.querySelector(`#${dl}`);\r\n      if (datalist) {\r\n        const items = Array.from(datalist.children).map((o) => {\r\n          const value = o.getAttribute(\"value\") ?? o.innerHTML.toLowerCase();\r\n          const label = o.innerHTML;\r\n\r\n          return {\r\n            value,\r\n            label,\r\n          };\r\n        });\r\n        this._addItems(items);\r\n      } else {\r\n        console.error(`Datalist not found ${dl}`);\r\n      }\r\n    }\r\n    this._setHiddenVal();\r\n\r\n    // From an external source\r\n    if (this._config.server && !this._config.liveServer) {\r\n      this._loadFromServer();\r\n    }\r\n  }\r\n\r\n  _setHiddenVal() {\r\n    if (this._config.hiddenInput && !this._config.hiddenValue) {\r\n      for (const entry of this._items) {\r\n        if (entry.label == this._searchInput.value) {\r\n          this._hiddenInput.value = entry.value;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  _normalizeData(src) {\r\n    if (Array.isArray(src)) {\r\n      return src;\r\n    }\r\n\r\n    let arr = [];\r\n    // Normalize objects into an array of value/label objects\r\n    for (const [value, label] of Object.entries(src)) {\r\n      arr.push({\r\n        value,\r\n        label,\r\n      });\r\n    }\r\n    return arr;\r\n  }\r\n\r\n  /**\r\n   * @param {Array|Object} src An array of items or a value:label object\r\n   */\r\n  _addItems(src) {\r\n    src = this._normalizeData(src);\r\n    for (const entry of src) {\r\n      if (entry.group && entry.items) {\r\n        entry.items.forEach((e) => (e.group = entry.group));\r\n        this._addItems(entry.items);\r\n        continue;\r\n      }\r\n\r\n      const label = typeof entry === \"string\" ? entry : entry.label;\r\n      const item = typeof entry !== \"object\" ? {} : entry;\r\n\r\n      // Normalize entry when the entry is just a string (value = label)\r\n      item.label = entry[this._config.labelField] ?? label;\r\n      item.value = entry[this._config.valueField] ?? label;\r\n\r\n      // Make sure we have a label\r\n      if (item.label) {\r\n        this._items.push(item);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {boolean} show\r\n   */\r\n  _loadFromServer(show = false) {\r\n    if (this._abortController) {\r\n      this._abortController.abort();\r\n    }\r\n    this._abortController = new AbortController();\r\n\r\n    // call early so the config can be changed dynamically\r\n    this._config.onBeforeFetch(this);\r\n\r\n    // Read data params dynamically as well\r\n    let extraParams = this._searchInput.dataset.serverParams || {};\r\n    if (typeof extraParams == \"string\") {\r\n      extraParams = JSON.parse(extraParams);\r\n    }\r\n    const params = Object.assign({}, this._config.serverParams, extraParams);\r\n    // Pass current value\r\n    params[this._config.queryParam] = this._searchInput.value;\r\n    // Prevent caching\r\n    if (this._config.noCache) {\r\n      params.t = Date.now();\r\n    }\r\n\r\n     // We have a related field or an array of related fields\r\n    if (params.related) {\r\n      // Check if params.related is an array\r\n      const relatedItems = Array.isArray(params.related) ? params.related : [params.related];\r\n\r\n      relatedItems.forEach((related) => {\r\n        const input = document.getElementById(related);\r\n        if (input) {\r\n          const inputValue = input.value;\r\n          const inputName = input.getAttribute(\"name\");\r\n\r\n          // Update params with the input value\r\n          if (inputName) {\r\n            params[inputName] = inputValue;\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n    const urlParams = new URLSearchParams(params);\r\n    let url = this._config.server;\r\n    let fetchOptions = Object.assign(this._config.fetchOptions, {\r\n      method: this._config.serverMethod || \"GET\",\r\n      signal: this._abortController.signal,\r\n    });\r\n\r\n    if (fetchOptions.method === \"POST\") {\r\n      fetchOptions.body = urlParams;\r\n    } else {\r\n      if (url.indexOf('?') == -1) url += \"?\";\r\n      else url += \"&\";\r\n      url += urlParams.toString();\r\n    }\r\n\r\n    this._searchInput.classList.add(LOADING_CLASS);\r\n\r\n    fetch(url, fetchOptions)\r\n      .then((r) => this._config.onServerResponse(r, this))\r\n      .then((suggestions) => {\r\n        const data = nested(this._config.serverDataKey, suggestions) || suggestions;\r\n        this.setData(data);\r\n        this._setHiddenVal();\r\n        this._abortController = null;\r\n        if (show) {\r\n          this._showSuggestions();\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        this._config.onServerError(e, this._abortController.signal, this);\r\n      })\r\n      .finally((e) => {\r\n        this._searchInput.classList.remove(LOADING_CLASS);\r\n        this._config.onAfterFetch(this);\r\n      });\r\n  }\r\n\r\n  // #endregion\r\n}\r\n\r\nexport default Autocomplete;\r\n"],
  "mappings": "AAsGA,IAAMA,EAAW,CACf,mBAAoB,GACpB,qBAAsB,EACtB,aAAc,EACd,gBAAiB,GACjB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,eAAgB,GAChB,eAAgB,GAChB,UAAW,GACX,MAAO,GACP,MAAO,GACP,WAAY,GACZ,OAAQ,GACR,2BAA4B,GAC5B,UAAW,GACX,cAAe,CAAC,aAAc,YAAY,EAC1C,WAAY,QACZ,WAAY,QACZ,aAAc,CAAC,OAAO,EACtB,WAAY,QACZ,MAAO,CAAC,EACR,OAAQ,KACR,YAAa,GACb,YAAa,GACb,aAAc,GACd,SAAU,GACV,OAAQ,GACR,aAAc,MACd,aAAc,CAAC,EACf,cAAe,OACf,aAAc,CAAC,EACf,WAAY,GACZ,QAAS,GACT,aAAc,IACd,gBAAiB,GACjB,aAAc,CAACC,EAAMC,EAAOC,IACnBD,EAET,aAAc,CAACD,EAAME,IAAS,CAAC,EAC/B,YAAa,CAACF,EAAME,IAAS,CAAC,EAC9B,iBAAkB,CAACC,EAAUD,IACpBC,EAAS,KAAK,EAEvB,cAAe,CAACC,EAAGC,EAAQH,IAAS,CAE9BE,EAAE,OAAS,cAAgBC,EAAO,SAGtC,QAAQ,MAAMD,CAAC,CACjB,EACA,SAAU,CAACJ,EAAME,IAAS,CAAC,EAC3B,cAAgBA,GAAS,CAAC,EAC1B,aAAeA,GAAS,CAAC,CAC3B,EAMMI,EAAgB,aAChBC,EAAe,YACfC,EAAa,OACbC,EAAO,OACPC,EAAO,OAKPC,EAAe,IAAI,QACrBC,EAAU,EACVC,EAAgB,EAWpB,SAASC,EAASC,EAAMC,EAAU,IAAK,CACrC,IAAIC,EACJ,MAAO,IAAIC,IAAS,CAClB,aAAaD,CAAK,EAClBA,EAAQ,WAAW,IAAM,CAEvBF,EAAK,MAAM,KAAMG,CAAI,CACvB,EAAGF,CAAO,CACZ,CACF,CAMA,SAASG,EAAiBC,EAAK,CAC7B,OAAOA,EAAI,UAAU,KAAK,EAAE,QAAQ,mBAAoB,EAAE,CAC5D,CAMA,SAASC,EAAUD,EAAK,CACtB,OAAKA,EAGED,EAAiBC,EAAI,SAAS,CAAC,EAAE,YAAY,EAF3C,EAGX,CAUA,SAASE,EAAWF,EAAKG,EAAQ,CAC/B,GAAIH,EAAI,QAAQG,CAAM,GAAK,EACzB,MAAO,GAET,IAAIC,EAAM,EACV,QAASC,EAAI,EAAGA,EAAIF,EAAO,OAAQE,IAAK,CACtC,IAAMC,EAAIH,EAAOE,CAAC,EAClB,GAAIC,GAAK,MACTF,EAAMJ,EAAI,QAAQM,EAAGF,CAAG,EAAI,EACxBA,GAAO,GACT,MAAO,GAGX,MAAO,EACT,CAOA,SAASG,EAAYC,EAAIC,EAAO,CAC9B,OAAOD,EAAG,WAAW,aAAaC,EAAOD,EAAG,WAAW,CACzD,CAMA,SAASE,EAAWC,EAAM,CACxB,IAAIC,EAAM,SAAS,cAAc,UAAU,EAC3C,OAAAA,EAAI,UAAYD,EACTC,EAAI,KACb,CAMA,SAASC,EAAML,EAAIK,EAAO,CACxB,OAAW,CAACC,EAAGC,CAAC,IAAK,OAAO,QAAQF,CAAK,EACvCL,EAAG,aAAaM,EAAGC,CAAC,CAExB,CAMA,SAASC,EAAOR,EAAI,CAElBA,EAAG,UAAYA,EAAG,UAElBA,EAAG,UAAYA,EAAG,UACf,MAAM,EAAE,EACR,IAAKS,GAASA,EAAO,OAAO,EAC5B,KAAK,EAAE,CACZ,CAEA,SAASC,EAAOlB,EAAKmB,EAAM,SAAU,CACnC,OAAOnB,EAAI,MAAM,GAAG,EAAE,OAAO,CAACoB,EAAGC,IAAMD,EAAEC,CAAC,EAAGF,CAAG,CAClD,CAIA,IAAMG,EAAN,KAAmB,CAKjB,YAAYd,EAAIe,EAAS,CAAC,EAAG,CAC3B,GAAI,EAAEf,aAAc,aAAc,CAChC,QAAQ,MAAM,kBAAmBA,CAAE,EACnC,OAEFjB,EAAa,IAAIiB,EAAI,IAAI,EACzBhB,IACAC,IACA,KAAK+B,EAAehB,EAEpB,KAAKiB,EAAWF,CAAM,EAGtB,KAAKG,EAAW,GAChB,KAAKC,EAAgB,GACrB,KAAKC,EAAsB,GAC3B,KAAKC,EAAcnC,EAAS,IAAM,CAChC,KAAKoC,EAAgB,EAAI,CAC3B,EAAG,KAAKC,EAAQ,YAAY,EAG5B,KAAKC,EAAsB,EAC3B,KAAKC,EAAsB,EAEvB,KAAKF,EAAQ,QACf,SAAS,iBAAiB,SAAU,KAAM,EAAI,EAC9C,OAAO,iBAAiB,SAAU,IAAI,GAGxC,IAAMG,EAAe,KAAKC,EAAiB,EACvCD,GACFA,EAAa,iBAAiB,QAAS,IAAI,EAI7C,CAAC,QAAS,SAAU,OAAQ,QAAS,SAAS,EAAE,QAASE,GAAS,CAChE,KAAKZ,EAAa,iBAAiBY,EAAM,IAAI,CAC/C,CAAC,EACD,CAAC,YAAa,aAAc,YAAY,EAAE,QAASA,GAAS,CAC1D,KAAKC,EAAa,iBAAiBD,EAAM,IAAI,CAC/C,CAAC,EAED,KAAKE,EAAW,CAClB,CASA,OAAO,KAAKC,EAAW,qBAAsBhB,EAAS,CAAC,EAAG,CAI1C,SAAS,iBAAiBgB,CAAQ,EAC1C,QAAS/B,GAAO,CACpB,KAAK,oBAAoBA,EAAIe,CAAM,CACrC,CAAC,CACH,CAMA,OAAO,YAAYf,EAAI,CACrB,OAAOjB,EAAa,IAAIiB,CAAE,EAAIjB,EAAa,IAAIiB,CAAE,EAAI,IACvD,CAOA,OAAO,oBAAoBA,EAAIe,EAAS,CAAC,EAAG,CAC1C,OAAO,KAAK,YAAYf,CAAE,GAAK,IAAI,KAAKA,EAAIe,CAAM,CACpD,CAEA,SAAU,CACR9B,IAEA,CAAC,QAAS,SAAU,OAAQ,QAAS,SAAS,EAAE,QAAS2C,GAAS,CAChE,KAAKZ,EAAa,oBAAoBY,EAAM,IAAI,CAClD,CAAC,EACD,CAAC,YAAa,aAAc,YAAY,EAAE,QAASA,GAAS,CAC1D,KAAKC,EAAa,oBAAoBD,EAAM,IAAI,CAClD,CAAC,EAED,IAAMF,EAAe,KAAKC,EAAiB,EACvCD,GACFA,EAAa,oBAAoB,QAAS,IAAI,EAI5C,KAAKH,EAAQ,OAAStC,GAAiB,IACzC,SAAS,oBAAoB,SAAU,KAAM,EAAI,EACjD,OAAO,oBAAoB,SAAU,IAAI,GAG3C,KAAK4C,EAAa,cAAc,YAAY,KAAKA,CAAY,EAE7D9C,EAAa,OAAO,KAAKiC,CAAY,CACvC,CAEAW,GAAmB,CACjB,GAAI,KAAKJ,EAAQ,aACf,OAAO,SAAS,cAAc,KAAKA,EAAQ,YAAY,CAE3D,CAOA,YAAeS,GAAU,CAEL,CAAC,SAAU,QAAQ,EACvB,SAASA,EAAM,IAAI,GAC3B,KAAKC,GAAQ,OAAO,qBAAqB,KAAKA,CAAM,EACxD,KAAKA,EAAS,OAAO,sBAAsB,IAAM,CAC/C,KAAK,KAAKD,EAAM,MAAM,EAAEA,CAAK,CAC/B,CAAC,GAED,KAAK,KAAKA,EAAM,MAAM,EAAEA,CAAK,CAEjC,EAKAf,EAAWF,EAAS,CAAC,EAAG,CACtB,KAAKQ,EAAU,OAAO,OAAO,CAAC,EAAGpD,CAAQ,EAGzC,IAAM+D,EAAI,CAAE,GAAGnB,EAAQ,GAAG,KAAKC,EAAa,OAAQ,EAG9CmB,EAAaC,GAAU,CAAC,OAAQ,QAAS,IAAK,IAAK,GAAM,EAAK,EAAE,SAASA,CAAK,GAAK,CAAC,CAAC,KAAK,MAAMA,CAAK,EAG3G,OAAW,CAACC,EAAKC,CAAY,IAAK,OAAO,QAAQnE,CAAQ,EAAG,CAE1D,GAAI+D,EAAEG,CAAG,IAAM,OACb,SAEF,IAAMD,EAAQF,EAAEG,CAAG,EACnB,OAAQ,OAAOC,EAAc,CAC3B,IAAK,SACH,KAAKf,EAAQc,CAAG,EAAI,SAASD,CAAK,EAClC,MACF,IAAK,UACH,KAAKb,EAAQc,CAAG,EAAIF,EAAUC,CAAK,EACnC,MACF,IAAK,SACH,KAAKb,EAAQc,CAAG,EAAID,EAAM,SAAS,EACnC,MACF,IAAK,SAEH,GAAI,MAAM,QAAQE,CAAY,EAC5B,GAAI,OAAOF,GAAU,SAAU,CAC7B,IAAMG,EAAYH,EAAM,SAAS,GAAG,EAAI,IAAM,IAC9C,KAAKb,EAAQc,CAAG,EAAID,EAAM,MAAMG,CAAS,OAEzC,KAAKhB,EAAQc,CAAG,EAAID,OAGtB,KAAKb,EAAQc,CAAG,EAAI,OAAOD,GAAU,SAAW,KAAK,MAAMA,CAAK,EAAIA,EAEtE,MACF,IAAK,WACH,KAAKb,EAAQc,CAAG,EAAI,OAAOD,GAAU,SAAW,OAAOA,CAAK,EAAIA,EAChE,MACF,QACE,KAAKb,EAAQc,CAAG,EAAID,EACpB,KACJ,EAEJ,CAMAZ,GAAwB,CAetB,GAdA,KAAKR,EAAa,aAAe,MACjC,KAAKA,EAAa,WAAa,GAK/BX,EAAM,KAAKW,EAAc,CACvB,oBAAqB,OACrB,gBAAiB,OACjB,gBAAiB,QACjB,KAAM,UACR,CAAC,EAGG,KAAKA,EAAa,IAAM,KAAKO,EAAQ,2BAA4B,CACnE,IAAMlD,EAAQ,SAAS,cAAc,SAAS,KAAK2C,EAAa,MAAM,EAClE3C,GACFmC,EAAOnC,CAAK,EAKhB,KAAKmE,EAAe,KAChB,KAAKjB,EAAQ,cACf,KAAKiB,EAAe,SAAS,cAAc,OAAO,EAClD,KAAKA,EAAa,KAAO,SACzB,KAAKA,EAAa,MAAQ,KAAKjB,EAAQ,YACvC,KAAKiB,EAAa,KAAO,KAAKxB,EAAa,KAC3C,KAAKA,EAAa,KAAO,IAAM,KAAKA,EAAa,KACjDjB,EAAY,KAAKiB,EAAc,KAAKwB,CAAY,EAEpD,CAEAf,GAAwB,CACtB,KAAKI,EAAe,SAAS,cAAc,IAAI,EAC/C,KAAKA,EAAa,GAAK,WAAa7C,EACpC,KAAK6C,EAAa,UAAU,IAAQ,gBAAiB,oBAAqB,KAAM,EAChF,KAAKA,EAAa,MAAM,UAAY,QAC/B,KAAKN,EAAQ,YAChB,KAAKM,EAAa,MAAM,SAAW,SAEjC,KAAKN,EAAQ,QACf,KAAKM,EAAa,MAAM,SAAW,SAErC,KAAKA,EAAa,MAAM,UAAY,OAGpC,KAAKA,EAAa,MAAM,mBAAqB,UAC7C,KAAKA,EAAa,MAAM,UAAY,QAEpC9B,EAAY,KAAKiB,EAAc,KAAKa,CAAY,EAEhD,KAAKb,EAAa,aAAa,gBAAiB,KAAKa,EAAa,EAAE,CACtE,CAMA,QAAQrD,EAAG,CACLA,EAAE,OAAO,QAAQ,KAAK+C,EAAQ,YAAY,GAC5C,KAAK,MAAM,CAEf,CAEA,QAAQ/C,EAAG,CACL,KAAK2C,IAIL,KAAKqB,IACP,KAAKA,EAAa,MAAQ,MAE5B,KAAK,aAAa,EACpB,CAEA,SAAShE,EAAG,CACV,IAAMiE,EAAS,KAAKzB,EAAa,MAC3B5C,EAAO,KAAKsE,EAAO,KAAMtE,GAASA,EAAK,QAAUqE,CAAM,EAC7D,KAAKlB,EAAQ,SAASnD,EAAM,IAAI,CAClC,CAEA,OAAOI,EAAG,CACR,IAAMmE,EAAUnE,EAAE,cAGlB,GAAI,KAAK0C,GAAYyB,IAAYA,EAAQ,UAAU,SAAS,OAAO,GAAKA,EAAQ,UAAU,SAAS,mBAAmB,GAAI,CAExH,KAAK3B,EAAa,MAAM,EACxB,OAEF,WAAW,IAAM,CACf,KAAK,gBAAgB,CACvB,EAAG,GAAG,CACR,CAEA,QAAQxC,EAAG,CACT,KAAK,aAAa,CACpB,CAMA,UAAUA,EAAG,CAEX,OADYA,EAAE,SAAWA,EAAE,IACd,CACX,IAAK,IACL,IAAK,QACH,GAAI,KAAK,kBAAkB,EAAG,CAC5B,IAAMoE,EAAY,KAAK,aAAa,EAChCA,GACFA,EAAU,MAAM,GAEdA,GAAa,CAAC,KAAKrB,EAAQ,cAC7B/C,EAAE,eAAe,EAGrB,MACF,IAAK,GACL,IAAK,MACH,GAAI,KAAK,kBAAkB,GAAK,KAAK+C,EAAQ,UAAW,CACtD,IAAMqB,EAAY,KAAK,aAAa,EAChCA,IACFA,EAAU,MAAM,EAChBpE,EAAE,eAAe,GAGrB,MACF,IAAK,IACL,IAAK,UACHA,EAAE,eAAe,EACjB,KAAK4C,EAAsB,GAC3B,KAAKyB,EAAe/D,CAAI,EACxB,MACF,IAAK,IACL,IAAK,YACHN,EAAE,eAAe,EACjB,KAAK4C,EAAsB,GACvB,KAAK,kBAAkB,EACzB,KAAKyB,EAAehE,CAAI,EAGxB,KAAK,aAAa,EAAK,EAEzB,MACF,IAAK,IACL,IAAK,SACC,KAAK,kBAAkB,IACzB,KAAKmC,EAAa,MAAM,EACxB,KAAK,gBAAgB,GAEvB,KACJ,CACF,CAEA,aAAaxC,EAAG,CACd,KAAK0C,EAAW,EAClB,CAEA,YAAY1C,EAAG,CACb,KAAK0C,EAAW,GAEhB,KAAKE,EAAsB,EAC7B,CAEA,aAAa5C,EAAG,CACd,KAAK0C,EAAW,GAEhB,KAAK,gBAAgB,CACvB,CAEA,SAAS1C,EAAG,CACV,KAAKsE,EAAc,CACrB,CAEA,SAAStE,EAAG,CACV,KAAKsE,EAAc,CACrB,CAUA,UAAUxC,EAAI,KAAM,CAClB,OAAIA,IAAM,KACD,KAAKiB,EAAQjB,CAAC,EAEhB,KAAKiB,CACd,CAMA,UAAUjB,EAAGC,EAAG,CACd,KAAKgB,EAAQjB,CAAC,EAAIC,CACpB,CAEA,QAAQwC,EAAK,CACX,KAAKL,EAAS,CAAC,EACf,KAAKM,EAAUD,CAAG,CACpB,CAEA,QAAS,CACP,KAAK/B,EAAa,aAAa,WAAY,EAAE,CAC/C,CAEA,SAAU,CACR,KAAKA,EAAa,gBAAgB,UAAU,CAC9C,CAKA,YAAa,CACX,OAAO,KAAKA,EAAa,aAAa,UAAU,GAAK,KAAKA,EAAa,UAAY,KAAKA,EAAa,aAAa,UAAU,CAC9H,CAKA,mBAAoB,CAClB,OAAO,KAAKa,EAAa,UAAU,SAASjD,CAAU,CACxD,CAEA,OAAQ,CACT,IAAM2B,EAAI,KAAKS,EAAa,MAEzB,KAAKA,EAAa,MAAQ,GACtB,KAAKwB,IACP,KAAKA,EAAa,MAAQ,IAG5B,KAAKjB,EAAQ,YAAYhB,EAAG,IAAI,CAClC,CASA,cAAe,CACb,OAAO,KAAKsB,EAAa,cAAc,KAAOlD,CAAY,CAC5D,CAEA,iBAAkB,CAChB,IAAMiE,EAAY,KAAK,aAAa,EAChCA,GACFA,EAAU,UAAU,OAAO,GAAG,KAAKK,EAAe,CAAC,CAEvD,CAKAA,GAAiB,CACf,MAAO,CAAC,GAAG,KAAK1B,EAAQ,cAAmB5C,CAAa,CAC1D,CAMAuE,EAAeC,EAAI,CACjB,GAAIA,EAAG,MAAM,UAAY,OACvB,MAAO,GAET,IAAMC,EAAKD,EAAG,kBACd,OAAOC,EAAG,UAAY,KAAO,CAACA,EAAG,UAAU,SAAS,UAAU,CAChE,CAOAP,EAAeQ,EAAMxE,EAAMyE,EAAM,KAAM,CACrC,IAAMC,EAAS,KAAK,aAAa,EAGjC,GAAKA,EAYE,CACL,IAAMC,EAAUH,IAAQxE,EAAO,cAAgB,kBAG/CyE,EAAMC,EAAO,WACb,GACED,EAAMA,EAAIE,CAAO,QACVF,GAAO,CAAC,KAAKJ,EAAeI,CAAG,GAGpCA,GAEFC,EAAO,UAAU,OAAO,GAAG,KAAKN,EAAe,CAAC,EAG5CI,IAAQvE,EAEVwE,EAAI,WAAW,UAAYA,EAAI,UAAYA,EAAI,WAAW,UAGtDA,EAAI,UAAYA,EAAI,WAAW,aAAeA,EAAI,eACpDA,EAAI,WAAW,WAAaA,EAAI,eAG3BC,IACTD,EAAMC,EAAO,mBArCJ,CAEX,GAAIF,IAAQvE,EACV,OAAOwE,EAGT,GAAI,CAACA,EAEH,IADAA,EAAM,KAAKzB,EAAa,WACjByB,GAAO,CAAC,KAAKJ,EAAeI,CAAG,GACpCA,EAAMA,EAAI,YAgChB,GAAIA,EAAK,CACP,IAAMG,EAAIH,EAAI,cAAc,GAAG,EAC/BG,EAAE,UAAU,IAAI,GAAG,KAAKR,EAAe,CAAC,EACxC,KAAKjC,EAAa,aAAa,wBAAyByC,EAAE,EAAE,EACxD,KAAKlC,EAAQ,iBACf,KAAKP,EAAa,MAAQyC,EAAE,QAAQ,YAGtC,KAAKzC,EAAa,aAAa,wBAAyB,EAAE,EAE5D,OAAOsC,CACT,CAUAI,GAAc,CACZ,OAAI,KAAK,WAAW,EACX,GAEF,KAAK1C,EAAa,MAAM,QAAU,KAAKO,EAAQ,oBACxD,CAMA,aAAaoC,EAAQ,GAAM,CACzB,GAAIA,GAAS,CAAC,KAAKD,EAAY,EAAG,CAChC,KAAK,gBAAgB,EACrB,OAEE,KAAKnC,EAAQ,WACf,KAAKF,EAAY,EACR,KAAKE,EAAQ,OACtB,KAAKA,EAAQ,OAAO,KAAKP,EAAa,MAAQ4C,GAAU,CACtD,KAAK,QAAQA,CAAK,EAClB,KAAKC,EAAiB,CACxB,CAAC,EAED,KAAKA,EAAiB,CAE1B,CAMAC,EAAaC,EAAM,CACjB,IAAMC,EAAW,KAAKC,EAAU,EAC1BC,EAAe,SAAS,cAAc,MAAM,EAClD,OAAAF,EAAS,OAAOE,CAAY,EAC5BA,EAAa,UAAU,IAAQ,kBAAmB,eAAgB,EAClEA,EAAa,UAAYH,EAClBC,CACT,CAOAG,EAAYxE,EAAQvB,EAAM,CACxB,IAAIC,EAAQD,EAAK,MAEjB,GAAI,KAAKmD,EAAQ,eAAgB,CAC/B,IAAM6C,EAAM3E,EAAUpB,CAAK,EAAE,QAAQsB,CAAM,EACvCyE,IAAQ,KACV/F,EACEA,EAAM,UAAU,EAAG+F,CAAG,EACtB,gBAAgB,KAAK7C,EAAQ,mBAAmBlD,EAAM,UAAU+F,EAAKA,EAAMzE,EAAO,MAAM,WACxFtB,EAAM,UAAU+F,EAAMzE,EAAO,OAAQtB,EAAM,MAAM,GAIvDA,EAAQ,KAAKkD,EAAQ,aAAanD,EAAMC,EAAO,IAAI,EAEnD,IAAM2F,EAAW,KAAKC,EAAU,EAC1BI,EAAe,SAAS,cAAc,GAAG,EAe/C,GAdAL,EAAS,OAAOK,CAAY,EAC5BA,EAAa,GAAK,KAAKxC,EAAa,GAAK,IAAM,KAAKA,EAAa,SAAS,OAC1EwC,EAAa,UAAU,IAAQ,gBAAiB,eAAgB,EAC5D,KAAK9C,EAAQ,WACf8C,EAAa,UAAU,IAAI,GAAG,KAAK9C,EAAQ,UAAU,MAAM,GAAG,CAAC,EAEjE8C,EAAa,aAAa,aAAcjG,EAAK,KAAK,EAClDiG,EAAa,aAAa,aAAcjG,EAAK,KAAK,EAGlDiG,EAAa,aAAa,WAAY,IAAI,EAC1CA,EAAa,aAAa,OAAQ,UAAU,EAC5CA,EAAa,aAAa,OAAQ,GAAG,EACrCA,EAAa,UAAYhG,EACrBD,EAAK,KACP,OAAW,CAACiE,EAAKD,CAAK,IAAK,OAAO,QAAQhE,EAAK,IAAI,EACjDiG,EAAa,QAAQhC,CAAG,EAAID,EAIhC,GAAI,KAAKb,EAAQ,OAAQ,CACvB,IAAM+C,EAAS,SAAS,cAAc,QAAQ,EAC9CA,EAAO,KAAO,SACdA,EAAO,UAAU,IAAQ,MAAO,WAAY,UAAW,EACvDA,EAAO,UAAY;AAAA;AAAA,cAGnBN,EAAS,OAAOM,CAAM,EACtBN,EAAS,UAAU,IAAQ,SAAU,yBAA0B,EAC/DM,EAAO,iBAAiB,QAAUtC,GAAU,CAC1C,KAAKhB,EAAa,MAAQ5C,EAAK,MAC/B,KAAK4C,EAAa,MAAM,CAC1B,CAAC,EAIH,OAAAqD,EAAa,iBAAiB,aAAerC,GAAU,CAErD,GAAI,KAAKZ,GAAuB,CAAC,KAAKF,EACpC,OAEF,KAAK,gBAAgB,EACrB,IAAM,EAAI8C,EAAS,cAAc,GAAG,EACpC,EAAE,UAAU,IAAI,GAAG,KAAKf,EAAe,CAAC,EACxC,KAAKjC,EAAa,aAAa,wBAAyB,EAAE,EAAE,CAC9D,CAAC,EAEDqD,EAAa,iBAAiB,YAAcrC,GAAU,CACpDA,EAAM,eAAe,CACvB,CAAC,EAEDqC,EAAa,iBAAiB,QAAUrC,GAAU,CAChDA,EAAM,eAAe,EAGrB,KAAKb,EAAgB,GACrB,KAAKH,EAAa,MAAQd,EAAW9B,EAAK,KAAK,EAE3C,KAAKoE,IACP,KAAKA,EAAa,MAAQpE,EAAK,OAEjC,KAAKmD,EAAQ,aAAanD,EAAM,IAAI,EACpC,KAAK,gBAAgB,EACrB,KAAK+C,EAAgB,EACvB,CAAC,EAEM6C,CACT,CAQAO,EAAkBC,EAAO,SAAU,CACjC,IAAMC,EAAWD,EAAK,cAEtB,OAAKC,EAIDA,EAAS,WACJ,KAAKF,EAAkBE,EAAS,UAAU,EAE1CA,EANA,IAQX,CAKAZ,GAAmB,CAEjB,GAAI,KAAKU,EAAkB,GAAK,KAAKvD,EACnC,OAEF,IAAMrB,EAASF,EAAU,KAAKuB,EAAa,KAAK,EAChD,KAAKa,EAAa,UAAY,GAE9B,IAAI6C,EAAQ,EACRC,EAAY,KAEVC,EAAS,CAAC,EAChB,QAAWC,KAAS,KAAKnC,EAAQ,CAE/B,IAAMoC,EAAqB,KAAKvD,EAAQ,oBAAsB5B,EAAO,SAAW,EAE5EoF,EAAYpF,EAAO,QAAU,GAAK,KAAK4B,EAAQ,uBAAyB,EACxE,CAACuD,GAAsBnF,EAAO,OAAS,GAEzC,KAAK4B,EAAQ,aAAa,QAASyD,GAAO,CACxC,IAAMC,EAAOxF,EAAUoF,EAAMG,CAAE,CAAC,EAC5BE,EAAQ,GACZ,GAAI,KAAK3D,EAAQ,MACf2D,EAAQxF,EAAWuF,EAAMtF,CAAM,MAC1B,CACL,IAAMyE,EAAMa,EAAK,QAAQtF,CAAM,EAC/BuF,EAAQ,KAAK3D,EAAQ,WAAa6C,IAAQ,EAAIA,GAAO,EAEnDc,IACFH,EAAY,GAEhB,CAAC,EAEH,IAAMI,EAAcJ,GAAapF,EAAO,SAAW,EACnD,GAAImF,GAAsBC,EAAW,CAInC,GAHAL,IAGIG,EAAM,OAAS,CAACD,EAAO,SAASC,EAAM,KAAK,EAAG,CAChD,IAAMO,EAAU,KAAKtB,EAAae,EAAM,KAAK,EAC7C,KAAKhD,EAAa,YAAYuD,CAAO,EACrCR,EAAO,KAAKC,EAAM,KAAK,EAGzB,IAAMO,EAAU,KAAKjB,EAAYxE,EAAQkF,CAAK,EAM9C,GAJI,CAACF,GAAaQ,IAChBR,EAAYS,GAEd,KAAKvD,EAAa,YAAYuD,CAAO,EACjC,KAAK7D,EAAQ,aAAe,GAAKmD,GAAS,KAAKnD,EAAQ,aACzD,OAUN,GALIoD,GAAa,KAAKpD,EAAQ,kBAC5B,KAAK,gBAAgB,EACrB,KAAKsB,EAAehE,EAAM8F,CAAS,GAGjCD,IAAU,EACZ,GAAI,KAAKnD,EAAQ,gBAAiB,CAChC,IAAMyC,EAAW,KAAKC,EAAU,EAChCD,EAAS,UAAY,+BAA+B,KAAKzC,EAAQ,yBACjE,KAAKM,EAAa,YAAYmC,CAAQ,EACtC,KAAKqB,EAAc,OAGnB,KAAK,gBAAgB,OAIvB,KAAKA,EAAc,CAEvB,CAKApB,GAAY,CACV,IAAMD,EAAW,SAAS,cAAc,IAAI,EAC5C,OAAAA,EAAS,aAAa,OAAQ,cAAc,EACrCA,CACT,CAKAqB,GAAgB,CACd,KAAKxD,EAAa,UAAU,IAAIjD,CAAU,EAE1C,KAAKiD,EAAa,aAAa,OAAQ,MAAM,EAC7CxB,EAAM,KAAKW,EAAc,CACvB,gBAAiB,MACnB,CAAC,EACD,KAAK8B,EAAc,CACrB,CAMA,kBAAkBa,EAAQ,GAAM,CAC1B,KAAK9B,EAAa,UAAU,SAASjD,CAAU,EACjD,KAAK,gBAAgB,EAErB,KAAK,aAAa+E,CAAK,CAE3B,CAKA,iBAAkB,CAChB,KAAK9B,EAAa,UAAU,OAAOjD,CAAU,EAC7CyB,EAAM,KAAKW,EAAc,CACvB,gBAAiB,OACnB,CAAC,EACD,KAAK,gBAAgB,CACvB,CAKA,UAAW,CACT,OAAO,KAAKA,CACd,CAKA,aAAc,CACZ,OAAO,KAAKa,CACd,CAKAiB,GAAgB,CACd,IAAMwC,EAAS,OAAO,iBAAiB,KAAKtE,CAAY,EAClDuE,EAAS,KAAKvE,EAAa,sBAAsB,EACjDwE,EAAQF,EAAO,YAAc,MAC7BG,EAAY,KAAKlE,EAAQ,UACzBmE,EAAQ,KAAKnE,EAAQ,MAIvBoE,EAAO,KACPC,EAAM,KAENF,IACFC,EAAOJ,EAAO,EACdK,EAAML,EAAO,EAAIA,EAAO,OAGpBC,GAAS,CAACC,IACZE,GAAQ,KAAK9D,EAAa,YAAc0D,EAAO,QAKnD,KAAK1D,EAAa,MAAM,UAAY,QAGhC4D,IACF,KAAK5D,EAAa,MAAM,MAAQ,KAAKb,EAAa,YAAc,MAI9D2E,IAAS,OACX,KAAK9D,EAAa,MAAM,KAAO8D,EAAO,MAEpCC,IAAQ,OACV,KAAK/D,EAAa,MAAM,IAAM+D,EAAM,MAItC,IAAMC,EAAa,KAAKhE,EAAa,sBAAsB,EACrD,EAAI,OAAO,YAGjB,GAAIgE,EAAW,EAAIA,EAAW,OAAS,EAAG,CAExC,IAAMC,EAAYL,EAAYF,EAAO,OAAS,EAAIA,EAAO,OAGzD,KAAK1D,EAAa,MAAM,UAAY,6BAA+BiE,EAAY,OAEnF,CAEAhE,GAAa,CACX,KAAKY,EAAS,CAAC,EAGf,KAAKM,EAAU,KAAKzB,EAAQ,KAAK,EAGjC,IAAMwE,EAAK,KAAKxE,EAAQ,SACxB,GAAIwE,EAAI,CACN,IAAMC,EAAW,SAAS,cAAc,IAAID,GAAI,EAChD,GAAIC,EAAU,CACZ,IAAMpC,EAAQ,MAAM,KAAKoC,EAAS,QAAQ,EAAE,IAAK9D,GAAM,CACrD,IAAME,EAAQF,EAAE,aAAa,OAAO,GAAKA,EAAE,UAAU,YAAY,EAC3D7D,EAAQ6D,EAAE,UAEhB,MAAO,CACL,MAAAE,EACA,MAAA/D,CACF,CACF,CAAC,EACD,KAAK2E,EAAUY,CAAK,OAEpB,QAAQ,MAAM,sBAAsBmC,GAAI,EAG5C,KAAKE,EAAc,EAGf,KAAK1E,EAAQ,QAAU,CAAC,KAAKA,EAAQ,YACvC,KAAKD,EAAgB,CAEzB,CAEA2E,GAAgB,CACd,GAAI,KAAK1E,EAAQ,aAAe,CAAC,KAAKA,EAAQ,YAC5C,QAAWsD,KAAS,KAAKnC,EACnBmC,EAAM,OAAS,KAAK7D,EAAa,QACnC,KAAKwB,EAAa,MAAQqC,EAAM,MAIxC,CAEAqB,EAAenD,EAAK,CAClB,GAAI,MAAM,QAAQA,CAAG,EACnB,OAAOA,EAGT,IAAIoD,EAAM,CAAC,EAEX,OAAW,CAAC/D,EAAO/D,CAAK,IAAK,OAAO,QAAQ0E,CAAG,EAC7CoD,EAAI,KAAK,CACP,MAAA/D,EACA,MAAA/D,CACF,CAAC,EAEH,OAAO8H,CACT,CAKAnD,EAAUD,EAAK,CACbA,EAAM,KAAKmD,EAAenD,CAAG,EAC7B,QAAW8B,KAAS9B,EAAK,CACvB,GAAI8B,EAAM,OAASA,EAAM,MAAO,CAC9BA,EAAM,MAAM,QAASrG,GAAOA,EAAE,MAAQqG,EAAM,KAAM,EAClD,KAAK7B,EAAU6B,EAAM,KAAK,EAC1B,SAGF,IAAMxG,EAAQ,OAAOwG,GAAU,SAAWA,EAAQA,EAAM,MAClDzG,EAAO,OAAOyG,GAAU,SAAW,CAAC,EAAIA,EAG9CzG,EAAK,MAAQyG,EAAM,KAAKtD,EAAQ,UAAU,GAAKlD,EAC/CD,EAAK,MAAQyG,EAAM,KAAKtD,EAAQ,UAAU,GAAKlD,EAG3CD,EAAK,OACP,KAAKsE,EAAO,KAAKtE,CAAI,EAG3B,CAKAkD,EAAgB8E,EAAO,GAAO,CACxB,KAAKC,GACP,KAAKA,EAAiB,MAAM,EAE9B,KAAKA,EAAmB,IAAI,gBAG5B,KAAK9E,EAAQ,cAAc,IAAI,EAG/B,IAAI+E,EAAc,KAAKtF,EAAa,QAAQ,cAAgB,CAAC,EACzD,OAAOsF,GAAe,WACxBA,EAAc,KAAK,MAAMA,CAAW,GAEtC,IAAMC,EAAS,OAAO,OAAO,CAAC,EAAG,KAAKhF,EAAQ,aAAc+E,CAAW,EAEvEC,EAAO,KAAKhF,EAAQ,UAAU,EAAI,KAAKP,EAAa,MAEhD,KAAKO,EAAQ,UACfgF,EAAO,EAAI,KAAK,IAAI,GAIlBA,EAAO,UAEY,MAAM,QAAQA,EAAO,OAAO,EAAIA,EAAO,QAAU,CAACA,EAAO,OAAO,GAExE,QAAS5D,GAAY,CAChC,IAAM6D,EAAQ,SAAS,eAAe7D,CAAO,EAC7C,GAAI6D,EAAO,CACT,IAAMC,EAAaD,EAAM,MACnBE,EAAYF,EAAM,aAAa,MAAM,EAGvCE,IACFH,EAAOG,CAAS,EAAID,GAG1B,CAAC,EAGH,IAAME,EAAY,IAAI,gBAAgBJ,CAAM,EACxCK,EAAM,KAAKrF,EAAQ,OACnBsF,EAAe,OAAO,OAAO,KAAKtF,EAAQ,aAAc,CAC1D,OAAQ,KAAKA,EAAQ,cAAgB,MACrC,OAAQ,KAAK8E,EAAiB,MAChC,CAAC,EAEGQ,EAAa,SAAW,OAC1BA,EAAa,KAAOF,GAEhBC,EAAI,QAAQ,GAAG,GAAK,GAAIA,GAAO,IAC9BA,GAAO,IACZA,GAAOD,EAAU,SAAS,GAG5B,KAAK3F,EAAa,UAAU,IAAItC,CAAa,EAE7C,MAAMkI,EAAKC,CAAY,EACpB,KAAMjG,GAAM,KAAKW,EAAQ,iBAAiBX,EAAG,IAAI,CAAC,EAClD,KAAMkG,GAAgB,CACrB,IAAMC,EAAOrG,EAAO,KAAKa,EAAQ,cAAeuF,CAAW,GAAKA,EAChE,KAAK,QAAQC,CAAI,EACjB,KAAKd,EAAc,EACnB,KAAKI,EAAmB,KACpBD,GACF,KAAKvC,EAAiB,CAE1B,CAAC,EACA,MAAOrF,GAAM,CACZ,KAAK+C,EAAQ,cAAc/C,EAAG,KAAK6H,EAAiB,OAAQ,IAAI,CAClE,CAAC,EACA,QAAS7H,GAAM,CACd,KAAKwC,EAAa,UAAU,OAAOtC,CAAa,EAChD,KAAK6C,EAAQ,aAAa,IAAI,CAChC,CAAC,CACL,CAGF,EAEOyF,EAAQlG",
  "names": ["DEFAULTS", "item", "label", "inst", "response", "e", "signal", "LOADING_CLASS", "ACTIVE_CLASS", "SHOW_CLASS", "NEXT", "PREV", "INSTANCE_MAP", "counter", "activeCounter", "debounce", "func", "timeout", "timer", "args", "removeDiacritics", "str", "normalize", "fuzzyMatch", "lookup", "pos", "i", "c", "insertAfter", "el", "newEl", "decodeHtml", "html", "txt", "attrs", "k", "v", "zwijit", "char", "nested", "obj", "r", "p", "Autocomplete", "config", "_searchInput", "_configure", "_isMouse", "_preventInput", "_keyboardNavigation", "_searchFunc", "_loadFromServer", "_config", "_configureSearchInput", "_configureDropElement", "clearControl", "_getClearControl", "type", "_dropElement", "_fetchData", "selector", "event", "_timer", "o", "parseBool", "value", "key", "defaultValue", "separator", "_hiddenInput", "search", "_items", "related", "selection", "_moveSelection", "_positionMenu", "src", "_addItems", "_activeClasses", "_isItemEnabled", "li", "fc", "dir", "sel", "active", "sibling", "a", "_shouldShow", "check", "items", "_showSuggestions", "_createGroup", "name", "newChild", "_createLi", "newChildSpan", "_createItem", "idx", "newChildLink", "fillIn", "_getActiveElement", "root", "activeEl", "count", "firstItem", "groups", "entry", "showAllSuggestions", "isMatched", "sf", "text", "found", "selectFirst", "newItem", "_showDropdown", "styles", "bounds", "isRTL", "fullWidth", "fixed", "left", "top", "dropBounds", "topOffset", "dl", "datalist", "_setHiddenVal", "_normalizeData", "arr", "show", "_abortController", "extraParams", "params", "input", "inputValue", "inputName", "urlParams", "url", "fetchOptions", "suggestions", "data", "autocomplete_default"]
}
